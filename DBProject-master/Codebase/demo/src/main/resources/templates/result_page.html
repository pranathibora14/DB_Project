<html xmlns:th="https://www.thymeleaf.org" xmlns:form="http://www.w3.org/1999/html">
<head>
    <title>Query Results</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="CSS/mycss.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@700&family=Roboto&display=swap" rel="stylesheet">
    <script>

        function myFunction() {
            var e = document.getElementById("rtime");
            var x = document.getElementById("planbt");
            var y = document.getElementById("res");
            var t= document.getElementById("tip");
            if (x.style.display === "none") {
                x.style.display = "block";
                y.style.display ="none";
                e.style.display="none";
                t.style.display="none";
            } else {
                x.style.display = "none";
            }
        }

        function myFunction1() {
            var t= document.getElementById("tip");
            var x = document.getElementById("res");
            var y = document.getElementById("planbt");
            var a= document.getElementById("ulp");
            var b= document.getElementById("rlp");
            var c= document.getElementById("olp");
            var d =document.getElementById("pp");
            var e = document.getElementById("rtime");
            if (x.style.display === "none") {
                x.style.display = "block";
                y.style.display ="none";
                a.style.display ="none";
                b.style.display ="none";
                c.style.display ="none";
                d.style.display ="none";
                e.style.display="none";
                t.style.display="none";
            } else {
                x.style.display = "none";
            }
        }

        function rtime() {
            var t= document.getElementById("tip");
            var x = document.getElementById("rtime");
            var e = document.getElementById("res");
            var y = document.getElementById("planbt");
            var a= document.getElementById("ulp");
            var b= document.getElementById("rlp");
            var c= document.getElementById("olp");
            var d =document.getElementById("pp");
            if (x.style.display === "none") {
                x.style.display = "block";
                e.style.display="none";
                y.style.display ="none";
                a.style.display ="none";
                b.style.display ="none";
                c.style.display ="none";
                d.style.display ="none";
                t.style.display="none";
            } else {
                x.style.display = "none";
            }
        }

        function ulp() {
            var x = document.getElementById("res");
            var e = document.getElementById("rtime");
            //var y = document.getElementById("myDIV");
            var z =document.getElementById("ulp");
            var t =document.getElementById("tip");
            var a =document.getElementById("rlp");
            var b =document.getElementById("olp");
            var c =document.getElementById("pp")
            if (z.style.display === "none") {
                z.style.display = "block";
                x.style.display ="none";
                a.style.display ="none";
                e.style.display="none";
                b.style.display ="none";
                c.style.display ="none";
                t.style.display="none";
            } else {
                z.style.display = "none";
            }
        }

        function rlp() {
            var x = document.getElementById("res");
            //var y = document.getElementById("myDIV");
            var e = document.getElementById("rtime");
            var z =document.getElementById("ulp");
            var a =document.getElementById("rlp");
            var t =document.getElementById("tip");
            var b =document.getElementById("olp");
            var c =document.getElementById("pp")
            if (a.style.display === "none") {
                a.style.display = "block";
                x.style.display ="none";
                b.style.display ="none";
                c.style.display ="none";
                z.style.display ="none";
                e.style.display="none";
                t.style.display="none";
            } else {
                a.style.display = "none";
            }
        }
        function olp() {
            var x = document.getElementById("res");
            //var y = document.getElementById("myDIV");
            var t =document.getElementById("tip");
            var e = document.getElementById("rtime");
            var z =document.getElementById("ulp");
            var a =document.getElementById("rlp");
            var b =document.getElementById("olp");
            var c =document.getElementById("pp")
            if (b.style.display === "none") {
                b.style.display = "block";
                z.style.display ="none";
                a.style.display ="none";
                e.style.display="none";
                x.style.display ="none";
                c.style.display ="none";
                t.style.display="none";
            } else {
                b.style.display = "none";
            }
        }
        function pp() {
            var x = document.getElementById("res");
            var e = document.getElementById("rtime");
            var t =document.getElementById("tip");
            //var y = document.getElementById("myDIV");
            var z =document.getElementById("ulp");
            var a =document.getElementById("rlp");
            var b =document.getElementById("olp");
            var c =document.getElementById("pp")
            if (c.style.display === "none") {
                c.style.display = "block";
                x.style.display ="none";
                a.style.display ="none";
                b.style.display ="none";
                e.style.display="none";
                z.style.display ="none";
                t.style.display="none";
            } else {
                c.style.display = "none";
            }
        }

        function tip() {
            var x = document.getElementById("tip");
            var t =document.getElementById("res");
            var e = document.getElementById("rtime");
            //var y = document.getElementById("myDIV");
            var z =document.getElementById("ulp");
            var a =document.getElementById("rlp");
            var b =document.getElementById("olp");
            var c =document.getElementById("pp")
            if (x.style.display === "none") {
                c.style.display = "none";
                t.style.display ="none";
                a.style.display ="none";
                b.style.display ="none";
                e.style.display="none";
                z.style.display ="none";
                x.style.display="block";

            } else {
                x.style.display = "none";
            }
        }

        function redirect(){
            var url= "http://localhost:8080/submitQuery";
            window.location.replace(url);
        }
        function sparkui(){
            var url= "http://localhost:4040/";
            window.open(url,'_blank');
        }
        function hui(){
            var url= "http://localhost:8088/";
            window.open(url,'_blank');
        }
        function namenodeui() {
            var url = "http://localhost:50070/";
            window.open(url, '_blank');
        }



    </script>
</head>
<body>
<h1 align="center" class="welcome_title">Query Results</h1>

   <!--/*@thymesVar id="query" type="com.example.demo.Query"*/-->


<br>
<p style="align-content: center" th:text="'Your Query:   ' + ${query.query_str}" align="center" class="txt"/>
<p th:text="${query.validation}" class="txt" align="center"/>
<br>
<div style="text-align: center" >
<button onclick="myFunction1()" align="center" class="btn btn-info buttons">Query Output</button>
<button onclick="myFunction()" align="center" class="btn btn-info buttons">Semantic Analysis</button>
    <button onclick="tip()" align="center" class="btn btn-info buttons">Optimization tips</button>
<!--<button onclick="redirect()" class="btn btn-info">Submit Another Query</button>-->
    <button onclick="rtime()" class="btn btn-info buttons">Run Time</button>
    <button onclick="sparkui()" class="btn btn-info buttons">Spark UI</button>
    <button onclick="hui()" class="btn btn-info buttons">Hadoop Application UI</button>
    <button onclick="namenodeui()" class="btn btn-info buttons">Hadoop Namenode UI</button>
    <button onclick="redirect()" class="btn btn-info buttons">Submit Another Query</button>

</div>
<br>
<div id="planbt" style="display: none" align="center" >
      <button align="center" onclick="ulp()" class="btn btn-info buttons" >Parsed Logical Plan</button>
    <button  align="center" onclick="rlp()" class="btn btn-info buttons" >Analysed Logical Plan</button>
    <button  align="center" onclick="olp()"  class="btn btn-info buttons">Optimized Logical Plan</button>
    <button  align="center" onclick="pp()"  class="btn btn-info buttons">Physical Plan</button>

</div>

<div id="rtime" align="center" style="display: none">
    <h2 class="txt">Query Run Time</h2>
    <pre th:text="${query.time} + ms " style="font-size: medium" class="results"/>
</div>
    <div id="ulp" style="display: none" align="center" class="results">
        <h2 class="txt"> Unresolved Logical Plan </h2>
        <pre th:text="${query.f1}" style="font-size: medium" class="results"/>
    </div>
     <div id="rlp" style="display: none" align="center">
        <h2 class="txt">Resolved Logical Plan</h2>
        <pre th:text=" ${query.f2}" style="font-size: medium" class="results"/>
    </div>
     <div id="olp" style="display: none" align="center">
        <h2 class="txt">Optimized Logical Plan</h2>
        <pre th:text=" ${query.f3}" style="font-size: medium" class="results"/>
    </div>
     <div id="pp" style="display: none" align="center">
        <h2 class="txt">Physical Plan</h2>
        <pre th:text="${query.f4}" style="font-size: medium" class="results"/>
    </div>

  <div id="tip" style="display: none" align="center">
    <h2 class="txt">Optimization tips</h2>
    <pre th:text=" ${query.tips}" style="font-size: medium" class="results"/>
</div>
</div>
<div id="res" style="display: none" align="center" class="results">
<pre th:text="${query.f5}"  />

</div>
<!--<p th:text="'content: ' + ${greeting.content}" />-->
<!--/*@thymesVar id="greeting" type="com.example.demo.Greeting"*/-->

<!--<p th:text="'content: ' + ${greeting.content}" />-->

</body>
</html>